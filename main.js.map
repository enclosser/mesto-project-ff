{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project/./src/components/modal.js","webpack://mesto-project/./src/components/api.js","webpack://mesto-project/./src/components/card.js","webpack://mesto-project/./src/components/validation.js","webpack://mesto-project/./src/index.js"],"sourcesContent":["export function openModal(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", pressEscapeClose);\n  popup.addEventListener(\"click\", clickOutsideClose);\n}\n\nexport function closeModal(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", pressEscapeClose);\n  popup.removeEventListener(\"click\", clickOutsideClose);\n}\n\nfunction clickOutsideClose(evt) {\n  if (!evt.target.closest(\".popup__content\")) {\n    evt.preventDefault();\n    const popup = document.querySelector(\".popup_is-opened\");\n    closeModal(popup);\n  }\n}\n\nfunction pressEscapeClose(evt) {\n  if (evt.key === \"Escape\") {\n    evt.preventDefault();\n    const selectedPopup = document.querySelector(\".popup_is-opened\");\n    closeModal(selectedPopup);\n  }\n}\n","const config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-21\",\n  headers: {\n    authorization: \"ba726ca4-babe-4c60-b803-4ec06cee7921\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nfunction checkResponse(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n}\n\nexport const getUserInfo = fetch(`${config.baseUrl}/users/me`, {\n  method: \"GET\",\n  headers: config.headers,\n}).then((res) => {\n  return checkResponse(res);\n});\n\nexport const getCards = fetch(`${config.baseUrl}/cards`, {\n  method: \"GET\",\n  headers: config.headers,\n}).then((res) => {\n  return checkResponse(res);\n});\n\nexport const updateUserServerInfo = (data) => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name: data.name,\n      about: data.job,\n    }),\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const createNewPost = (data) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headers,\n    body: JSON.stringify({\n      link: data.dataCard.link,\n      name: data.dataCard.name,\n    }),\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const deleteCard = (card) => {\n  return fetch(`${config.baseUrl}/cards/` + card, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const addLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/` + cardId, {\n    method: \"PUT\",\n    headers: config.headers,\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const removeLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/` + cardId, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const changeAvatar = (linkImg) => {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      avatar: linkImg,\n    }),\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n","import { openModal, closeModal } from \"./modal.js\";\nimport { deleteCard, addLike, removeLike } from \"./api.js\";\nexport const cardTemplate = document.querySelector(\"#card-template\").content;\n\nconst popupDelete = document.querySelector(\".delete__popup\");\nconst buttonPopupDelete = popupDelete.querySelector(\".popup__button\");\n\nexport function launchDeleteCard(event, cardId) {\n  const selectedCard = event.target.closest(\".card\");\n  openModal(popupDelete);\n  buttonPopupDelete.addEventListener(\"click\", (evt) => {\n    buttonPopupDelete.textContent = \"Удаление...\";\n    deleteCard(cardId._id)\n      .then((res) => {\n        selectedCard.remove();\n        closeModal(popupDelete);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally((res) => {\n        buttonPopupDelete.textContent = \"Да\";\n      });\n  });\n}\n\nexport function likeCard(event, data, likeCounter) {\n  if (!event.target.classList.contains(\"card__like-button_is-active\")) {\n    addLike(data.informationCard._id)\n      .then((res) => {\n        likeCounter.textContent = \"\" + res.likes.length;\n        event.target.classList.toggle(\"card__like-button_is-active\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  } else {\n    removeLike(data.informationCard._id)\n      .then((res) => {\n        likeCounter.textContent = \"\" + res.likes.length;\n        event.target.classList.toggle(\"card__like-button_is-active\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n}\n\nexport function makeCard(\n  data,\n  launchDeleteCard,\n  likeCard,\n  handlerOpenPopupImage\n) {\n  const cardData = data.informationCard;\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n  const buttonLike = cardElement.querySelector(\".card__like-button\");\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const likeCounter = cardElement.querySelector(\".like__counter\");\n  const contentForCounter = \"\" + cardData.likes.length;\n  likeCounter.textContent = contentForCounter;\n  cardImage.src = cardData.link;\n  cardImage.alt = cardData.name;\n  cardElement.querySelector(\".card__title\").textContent = cardData.name;\n  const buttonRemove = cardElement.querySelector(\".card__delete-button\");\n  if (cardData.owner._id === data.informationMe._id) {\n    buttonRemove.addEventListener(\"click\", (evt) => {\n      launchDeleteCard(evt, cardData);\n    });\n  } else {\n    buttonRemove.remove();\n  }\n  cardData.likes.forEach((arrayLike) => {\n    if (arrayLike._id === data.informationMe._id) {\n      buttonLike.classList.add(\"card__like-button_is-active\");\n    }\n  });\n  buttonLike.addEventListener(\"click\", (evt) => {\n    likeCard(evt, data, likeCounter);\n  });\n  cardImage.addEventListener(\"click\", (evt) => {\n    handlerOpenPopupImage(evt);\n  });\n  return cardElement;\n}\n","const showInputError = (\n  formElement,\n  inputElement,\n  errorMessage,\n  inputErrorClass\n) => {\n  const errorElement = formElement.querySelector(\n    `.input_${inputElement.name}-error`\n  );\n  inputElement.classList.add(inputErrorClass);\n  errorElement.textContent = errorMessage;\n};\n\nconst hideInputError = (formElement, inputElement, inputErrorClass) => {\n  const errorElement = formElement.querySelector(\n    `.input_${inputElement.name}-error`\n  );\n  errorElement.textContent = \"\";\n  inputElement.classList.remove(inputErrorClass);\n};\n\nexport function checkInputValidity(\n  formSelector,\n  inputSelector,\n  inputErrorClass\n) {\n  if (inputSelector.validity.patternMismatch) {\n    inputSelector.setCustomValidity(inputSelector.dataset.errorMessage);\n  } else {\n    inputSelector.setCustomValidity(\"\");\n  }\n  if (inputSelector.validity.valid) {\n    hideInputError(formSelector, inputSelector, inputErrorClass);\n  } else {\n    showInputError(\n      formSelector,\n      inputSelector,\n      inputSelector.validationMessage,\n      inputErrorClass\n    );\n  }\n}\n\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((evt) => {\n    return !evt.validity.valid;\n  });\n};\n\nexport function enableValidation(data) {\n  toggleButtonState(\n    data.inputListFormProfile,\n    data.buttonSubmit,\n    data.inactiveButtonClass\n  );\n  data.inputListFormProfile.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", (evt) => {\n      checkInputValidity(data.formSelector, inputElement, data.inputErrorClass);\n      toggleButtonState(\n        data.inputListFormProfile,\n        data.buttonSubmit,\n        data.inactiveButtonClass\n      );\n    });\n  });\n}\n\nexport function clearValidation(\n  formElement,\n  inputListFormProfile,\n  buttonSubmit\n) {\n  toggleButtonState(inputListFormProfile, buttonSubmit);\n  inputListFormProfile.forEach((inputElement) => {\n    hideInputError(formElement, inputElement);\n    inputElement.removeEventListener(\"input\", (evt) => {\n      checkInputValidity(formElement, inputElement);\n      toggleButtonState(inputListFormProfile, buttonSubmit);\n    });\n  });\n}\n\nexport const toggleButtonState = (\n  inputList,\n  ButtonPopupSubmit,\n  inactiveButtonClass = \"popup__button_disabled\"\n) => {\n  if (hasInvalidInput(inputList)) {\n    ButtonPopupSubmit.setAttribute(\"disabled\", \"\");\n    ButtonPopupSubmit.classList.add(\"\" + inactiveButtonClass);\n  } else {\n    ButtonPopupSubmit.classList.remove(\"\" + inactiveButtonClass);\n    ButtonPopupSubmit.removeAttribute(\"disabled\", \"\");\n  }\n};\n","import \"./pages/index.css\";\nimport { makeCard, likeCard, launchDeleteCard } from \"./components/card.js\";\nimport { openModal, closeModal } from \"./components/modal.js\";\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\nimport {\n  getUserInfo,\n  getCards,\n  updateUserServerInfo,\n  createNewPost,\n  changeAvatar,\n} from \"./components/api.js\";\n\n// Объявление переменных:\nconst placesList = document.querySelector(\".places__list\");\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst buttonEdit = document.querySelector(\".profile__edit-button\");\nconst buttonAdd = document.querySelector(\".profile__add-button\");\nconst profileImage = document.querySelector(\".profile__image\");\n\nconst popups = {\n  edit: document.querySelector(\".popup_type_edit\"),\n  newCard: document.querySelector(\".popup_type_new-card\"),\n  image: document.querySelector(\".popup_type_image\"),\n  editAvatar: document.querySelector(\".popup_type_edit_avatar\"),\n};\n\nconst popupImageElements = {\n  image: popups.image.querySelector(\".popup__image\"),\n  caption: popups.image.querySelector(\".popup__caption\"),\n};\n\nconst formElements = {\n  editProfile: popups.edit.querySelector(\".popup__form[name='edit-profile']\"),\n  newPlace: popups.newCard.querySelector(\".popup__form[name='new-place']\"),\n  editAvatar: popups.editAvatar.querySelector(\n    \".popup__form[name='edit-avatar']\"\n  ),\n};\n\nconst inputElements = {\n  nameProfile: formElements.editProfile.querySelector(\n    \".popup__input_type_name\"\n  ),\n  jobProfile: formElements.editProfile.querySelector(\n    \".popup__input_type_description\"\n  ),\n  nameNewCard: formElements.newPlace.querySelector(\n    \".popup__input_type_card-name\"\n  ),\n  urlNewCard: formElements.newPlace.querySelector(\".popup__input_type_url\"),\n};\n\nconst buttons = {\n  editProfileSubmit: formElements.editProfile.querySelector(\".popup__button\"),\n  addCardSubmit: formElements.newPlace.querySelector(\".popup__button\"),\n  editAvatarSubmit: formElements.editAvatar.querySelector(\".popup__button\"),\n};\n\nconst dataForCards = [getUserInfo, getCards];\n\n// Функции для обработки данных и работы с интерфейсом:\nfunction addCard(data) {\n  return makeCard(data, launchDeleteCard, likeCard, handleOpenPopupImage);\n}\n\nfunction updateUserInfo(data) {\n  profileTitle.textContent = data.name;\n  profileDescription.textContent = data.about;\n  profileImage.style.backgroundImage = `url(${data.avatar})`;\n}\n\nfunction renderInitialCards(cards) {\n  cards.forEach((card) => {\n    if (/http.*(jpeg|jpg|gif|png)/gi.test(card.link)) {\n      placesList.append(\n        addCard({ informationCard: card, informationMe: dataUserInfo })\n      );\n    }\n  });\n}\n\nfunction loadInitialInfo() {\n  Promise.all(dataForCards)\n    .then(([userInfo, cards]) => {\n      window.dataUserInfo = userInfo;\n      updateUserInfo(userInfo);\n      renderInitialCards(cards);\n    })\n    .catch(console.error);\n}\n\nfunction renderNewCard(newCard) {\n  placesList.prepend(\n    addCard({ informationCard: newCard, informationMe: dataUserInfo })\n  );\n}\n\nfunction handleOpenPopupImage(evt) {\n  popupImageElements.image.src = evt.target.src;\n  popupImageElements.image.alt = evt.target.alt;\n  popupImageElements.caption.textContent = evt.target.alt;\n  openModal(popups.image);\n}\n\nfunction handleFormSubmit(evt, handler, submitButton) {\n  evt.preventDefault();\n  submitButton.textContent = \"Сохранение...\";\n  handler()\n    .then(() => closeModal(evt.target.closest(\".popup\")))\n    .finally(() => {\n      submitButton.textContent = \"Сохранить\";\n    });\n}\n\nfunction handleEditProfileSubmit(evt) {\n  handleFormSubmit(\n    evt,\n    () =>\n      updateUserServerInfo({\n        name: inputElements.nameProfile.value,\n        job: inputElements.jobProfile.value,\n      }),\n    buttons.editProfileSubmit\n  );\n}\n\nfunction handleNewCardSubmit(evt) {\n  handleFormSubmit(\n    evt,\n    () =>\n      createNewPost({\n        name: inputElements.nameNewCard.value,\n        link: inputElements.urlNewCard.value,\n      }),\n    buttons.addCardSubmit\n  );\n}\n\nfunction handleEditAvatarSubmit(evt) {\n  handleFormSubmit(\n    evt,\n    () => {\n      const link = formElements.editAvatar.querySelector(\n        \".popup__input_type_url\"\n      ).value;\n      return changeAvatar(link).then((res) => {\n        profileImage.style.backgroundImage = `url(${res.avatar})`;\n      });\n    },\n    buttons.editAvatarSubmit\n  );\n}\n\n// Обработчики событий:\nbuttonEdit.addEventListener(\"click\", () => {\n  inputElements.nameProfile.value = profileTitle.textContent;\n  inputElements.jobProfile.value = profileDescription.textContent;\n  openModal(popups.edit);\n  clearValidation(formElements.editProfile);\n});\n\nbuttonAdd.addEventListener(\"click\", () => {\n  formElements.newPlace.reset();\n  clearValidation(formElements.newPlace);\n  openModal(popups.newCard);\n});\n\nprofileImage.addEventListener(\"click\", () => {\n  clearValidation(formElements.editAvatar);\n  openModal(popups.editAvatar);\n});\n\ndocument.querySelectorAll(\".popup__close\").forEach((btn) => {\n  btn.addEventListener(\"click\", (evt) =>\n    closeModal(evt.target.closest(\".popup\"))\n  );\n});\n\nformElements.editProfile.addEventListener(\"submit\", handleEditProfileSubmit);\nformElements.newPlace.addEventListener(\"submit\", handleNewCardSubmit);\nformElements.editAvatar.addEventListener(\"submit\", handleEditAvatarSubmit);\n\nformList.forEach(enableValidation);\n\n// Загрузка данных и рендеринг карточек:\nloadInitialInfo();\n"],"names":["openModal","popup","classList","add","document","addEventListener","pressEscapeClose","clickOutsideClose","closeModal","remove","removeEventListener","evt","target","closest","preventDefault","querySelector","key","config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","concat","status","getUserInfo","fetch","method","then","getCards","deleteCard","card","addLike","cardId","removeLike","cardTemplate","content","popupDelete","buttonPopupDelete","launchDeleteCard","event","selectedCard","textContent","_id","catch","err","console","log","finally","likeCard","data","likeCounter","contains","informationCard","likes","length","toggle","showInputError","formElement","inputElement","errorMessage","inputErrorClass","errorElement","name","hideInputError","checkInputValidity","formSelector","inputSelector","validity","patternMismatch","setCustomValidity","dataset","valid","validationMessage","clearValidation","inputListFormProfile","buttonSubmit","toggleButtonState","forEach","inputList","ButtonPopupSubmit","inactiveButtonClass","arguments","undefined","some","hasInvalidInput","removeAttribute","setAttribute","placesList","profileTitle","profileDescription","buttonEdit","buttonAdd","profileImage","popups","edit","newCard","image","editAvatar","popupImageElements","caption","formElements","editProfile","newPlace","inputElements","nameProfile","jobProfile","nameNewCard","urlNewCard","buttons","editProfileSubmit","addCardSubmit","editAvatarSubmit","dataForCards","handleOpenPopupImage","src","alt","handleFormSubmit","handler","submitButton","value","reset","querySelectorAll","btn","job","body","JSON","stringify","about","link","dataCard","linkImg","avatar","style","backgroundImage","formList","all","_ref","_ref2","userInfo","cards","window","dataUserInfo","test","append","handlerOpenPopupImage","cardData","cardElement","cloneNode","buttonLike","cardImage","contentForCounter","buttonRemove","owner","informationMe","arrayLike","makeCard","addCard","renderInitialCards","error"],"sourceRoot":""}