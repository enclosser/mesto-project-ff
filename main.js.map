{"version":3,"file":"main.js","mappings":"mBAAO,SAASA,EAAUC,GACxBA,EAAMC,UAAUC,IAAI,mBACpBC,SAASC,iBAAiB,UAAWC,GACrCL,EAAMI,iBAAiB,QAASE,EAClC,CAEO,SAASC,EAAWP,GACzBA,EAAMC,UAAUO,OAAO,mBACvBL,SAASM,oBAAoB,UAAWJ,GACxCL,EAAMS,oBAAoB,QAASH,EACrC,CAEA,SAASA,EAAkBI,GACpBA,EAAIC,OAAOC,QAAQ,qBACtBF,EAAIG,iBAEJN,EADcJ,SAASW,cAAc,qBAGzC,CAEA,SAAST,EAAiBK,GACR,WAAZA,EAAIK,MACNL,EAAIG,iBAEJN,EADsBJ,SAASW,cAAc,qBAGjD,CC1BA,IAAME,EAAS,CACbC,QAAS,4CACTC,QAAS,CACPC,cAAe,uCACf,eAAgB,qBAIpB,SAASC,EAAcC,GACrB,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAO,WAADC,OAAYL,EAAIM,QACvC,CAEO,IAAMC,EAAcC,MAAM,GAADH,OAAIV,EAAOC,QAAO,aAAa,CAC7Da,OAAQ,MACRZ,QAASF,EAAOE,UACfa,MAAK,SAACV,GACP,OAAOD,EAAcC,EACvB,IAEaW,EAAWH,MAAM,GAADH,OAAIV,EAAOC,QAAO,UAAU,CACvDa,OAAQ,MACRZ,QAASF,EAAOE,UACfa,MAAK,SAACV,GACP,OAAOD,EAAcC,EACvB,IA4BaY,EAAa,SAACC,GACzB,OAAOL,MAAM,GAAAH,OAAGV,EAAOC,QAAO,WAAYiB,EAAM,CAC9CJ,OAAQ,SACRZ,QAASF,EAAOE,UACfa,MAAK,SAACV,GACP,OAAOD,EAAcC,EACvB,GACF,EAEac,EAAU,SAACC,GACtB,OAAOP,MAAM,GAAAH,OAAGV,EAAOC,QAAO,iBAAkBmB,EAAQ,CACtDN,OAAQ,MACRZ,QAASF,EAAOE,UACfa,MAAK,SAACV,GACP,OAAOD,EAAcC,EACvB,GACF,EAEagB,EAAa,SAACD,GACzB,OAAOP,MAAM,GAAAH,OAAGV,EAAOC,QAAO,iBAAkBmB,EAAQ,CACtDN,OAAQ,SACRZ,QAASF,EAAOE,UACfa,MAAK,SAACV,GACP,OAAOD,EAAcC,EACvB,GACF,EC9EaiB,EAAenC,SAASW,cAAc,kBAAkByB,QAE/DC,EAAcrC,SAASW,cAAc,kBACrC2B,EAAoBD,EAAY1B,cAAc,kBAE7C,SAAS4B,EAAiBC,EAAOP,GACtC,IAAMQ,EAAeD,EAAMhC,OAAOC,QAAQ,SAC1Cb,EAAUyC,GACVC,EAAkBrC,iBAAiB,SAAS,SAACM,GAC3C+B,EAAkBI,YAAc,cAChCZ,EAAWG,EAAOU,KACff,MAAK,SAACV,GACLuB,EAAapC,SACbD,EAAWiC,EACb,IACCO,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IACCG,SAAQ,SAAC9B,GACRoB,EAAkBI,YAAc,IAClC,GACJ,GACF,CAEO,SAASO,EAAST,EAAOU,EAAMC,GAC/BX,EAAMhC,OAAOV,UAAUsD,SAAS,+BAUnClB,EAAWgB,EAAKG,gBAAgBV,KAC7Bf,MAAK,SAACV,GACLiC,EAAYT,YAAc,GAAKxB,EAAIoC,MAAMC,OACzCf,EAAMhC,OAAOV,UAAU0D,OAAO,8BAChC,IACCZ,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IAhBFb,EAAQkB,EAAKG,gBAAgBV,KAC1Bf,MAAK,SAACV,GACLiC,EAAYT,YAAc,GAAKxB,EAAIoC,MAAMC,OACzCf,EAAMhC,OAAOV,UAAU0D,OAAO,8BAChC,IACCZ,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,GAWN,CC9CA,IAAMY,EAAiB,SACrBC,EACAC,EACAC,EACAC,GAEA,IAAMC,EAAeJ,EAAY/C,cAAc,UAADY,OAClCoC,EAAaI,KAAI,WAE7BJ,EAAa7D,UAAUC,IAAI8D,GAC3BC,EAAapB,YAAckB,CAC7B,EAEMI,EAAiB,SAACN,EAAaC,EAAcE,GAC5BH,EAAY/C,cAAc,UAADY,OAClCoC,EAAaI,KAAI,WAEhBrB,YAAc,GAC3BiB,EAAa7D,UAAUO,OAAOwD,EAChC,EAEO,SAASI,EACdC,EACAC,EACAN,GAEIM,EAAcC,SAASC,gBACzBF,EAAcG,kBAAkBH,EAAcI,QAAQX,cAEtDO,EAAcG,kBAAkB,IAE9BH,EAAcC,SAASI,MACzBR,EAAeE,EAAcC,EAAeN,GAE5CJ,EACES,EACAC,EACAA,EAAcM,kBACdZ,EAGN,CA0BO,SAASa,EACdhB,EACAiB,EACAC,GAEAC,EAAkBF,EAAsBC,GACxCD,EAAqBG,SAAQ,SAACnB,GAC5BK,EAAeN,EAAaC,GAC5BA,EAAarD,oBAAoB,SAAS,SAACC,GACzC0D,EAAmBP,EAAaC,GAChCkB,EAAkBF,EAAsBC,EAC1C,GACF,GACF,CAEO,IAAMC,EAAoB,SAC/BE,EACAC,GAEG,IADHC,EAAmBC,UAAA3B,OAAA,QAAA4B,IAAAD,UAAA,GAAAA,UAAA,GAAG,0BA1CA,SAACH,GACvB,OAAOA,EAAUK,MAAK,SAAC7E,GACrB,OAAQA,EAAI6D,SAASI,KACvB,GACF,CAwCMa,CAAgBN,IAIlBC,EAAkBlF,UAAUO,OAAO,GAAK4E,GACxCD,EAAkBM,gBAAgB,WAAY,MAJ9CN,EAAkBO,aAAa,WAAY,IAC3CP,EAAkBlF,UAAUC,IAAI,GAAKkF,GAKzC,EClFMO,EAAiB,6BAEjBC,EAAazF,SAASW,cAAc,iBACpC+E,EAAe1F,SAASW,cAAc,mBACtCgF,EAAqB3F,SAASW,cAAc,yBAC5CiF,EAAa5F,SAASW,cAAc,yBACpCkF,EAAY7F,SAASW,cAAc,wBACnCmF,EAAe9F,SAASW,cAAc,mBAGtCoF,EAAY/F,SAASW,cAAc,oBACnCqF,EAAehG,SAASW,cAAc,wBACtCsF,EAAajG,SAASW,cAAc,qBACpCuF,EAAiBlG,SAASW,cAAc,2BACxCwF,EAAoBnG,SAASoG,iBAAiB,iBAC9CC,EAAqBJ,EAAWtF,cAAc,iBAC9C2F,EAAeL,EAAWtF,cAAc,mBAGxC4F,EAAyBR,EAAUpF,cACvC,qCAEI6F,EAAsBR,EAAarF,cACvC,kCAEI8F,EAAwBP,EAAevF,cAC3C,oCAGI+F,EAAWC,MAAMC,KAAK5G,SAASoG,iBAAiB,iBAEhDzB,EAAuBgC,MAAMC,KACjCL,EAAuBH,iBAAiB,kBAGpCS,EAAuBF,MAAMC,KACjCJ,EAAoBJ,iBAAiB,kBAGjCU,EAA0BH,MAAMC,KACpCH,EAAsBL,iBAAiB,kBAGnCW,EAAmBR,EAAuB5F,cAC9C,2BAEIqG,EAAWT,EAAuB5F,cACtC,kCAGIsG,EAAmBT,EAAoB7F,cAC3C,gCAEIuG,EAAWV,EAAoB7F,cAAc,0BAE7CwG,EACJZ,EAAuB5F,cAAc,kBAEjCyG,EACJZ,EAAoB7F,cAAc,kBAE9B0G,EACJZ,EAAsB9F,cAAc,kBAEhC2G,EAAe,CAAC7F,EAAaI,GAEnC,SAAS0F,EAAQrE,GACf,OF/BK,SACLA,EACAX,EACAU,EACAuE,GAEA,IAAMC,EAAWvE,EAAKG,gBAChBqE,EAAcvF,EAAaxB,cAAc,SAASgH,WAAU,GAC5DC,EAAaF,EAAY/G,cAAc,sBACvCkH,EAAYH,EAAY/G,cAAc,gBACtCwC,EAAcuE,EAAY/G,cAAc,kBACxCmH,EAAoB,GAAKL,EAASnE,MAAMC,OAC9CJ,EAAYT,YAAcoF,EAC1BD,EAAUE,IAAMN,EAASO,KACzBH,EAAUI,IAAMR,EAAS1D,KACzB2D,EAAY/G,cAAc,gBAAgB+B,YAAc+E,EAAS1D,KACjE,IAAMmE,EAAeR,EAAY/G,cAAc,wBAmB/C,OAlBI8G,EAASU,MAAMxF,MAAQO,EAAKkF,cAAczF,IAC5CuF,EAAajI,iBAAiB,SAAS,SAACM,GACtCgC,EAAiBhC,EAAKkH,EACxB,IAEAS,EAAa7H,SAEfoH,EAASnE,MAAMwB,SAAQ,SAACuD,GAClBA,EAAU1F,MAAQO,EAAKkF,cAAczF,KACvCiF,EAAW9H,UAAUC,IAAI,8BAE7B,IACA6H,EAAW3H,iBAAiB,SAAS,SAACM,GACpC0C,EAAS1C,EAAK2C,EAAMC,EACtB,IACA0E,EAAU5H,iBAAiB,SAAS,SAACM,GACnCiH,EAAsBjH,EACxB,IACOmH,CACT,CELSY,CAASpF,EAAMX,EAAkBU,EAAUuE,EACpD,CA0CA,SAASA,EAAsBjH,GAC7B8F,EAAmB0B,IAAMxH,EAAIC,OAAOuH,IACpC1B,EAAmB4B,IAAM1H,EAAIC,OAAOyH,IACpC3B,EAAa5D,YAAcnC,EAAIC,OAAOyH,IACtCrI,EAAUqG,EACZ,CA+DAL,EAAW3F,iBAAiB,SAAS,SAACM,GACpCwG,EAAiBwB,MAAQ7C,EAAahD,YACtCsE,EAASuB,MAAQ5C,EAAmBjD,YACpC9C,EAAUmG,GACVrB,EACE6B,EACA5B,EACAwC,EAGJ,IAEAtB,EAAU5F,iBAAiB,SAAS,SAACM,GACnCiG,EAAoBgC,QACpB9D,EACE8B,EACAK,EACAO,GAEFxH,EAAUoG,EACZ,IAEAF,EAAa7F,iBAAiB,SAAS,SAACM,GACtCmE,EACE+B,EACAK,EACAO,GAEFzH,EAAUsG,EACZ,IAIAC,EAAkBrB,SAAQ,SAACvE,GACzBA,EAAIN,iBAAiB,SAAS,SAACM,GAC7BH,EAAWG,EAAIC,OAAOC,QAAQ,UAChC,GACF,IAIA8F,EAAuBtG,iBAAiB,UAAU,SAACM,IAtGnD,SAAgCA,EAAKmD,GHpGD,IAACR,EGqGnC3C,EAAIG,iBACJyG,EAA6BzE,YAAc,iBHtGRQ,EGuGd,CAAEa,KAAMgD,EAAiBwB,MAAOE,IAAKzB,EAASuB,OHtG5D7G,MAAM,GAADH,OAAIV,EAAOC,QAAO,aAAa,CACzCa,OAAQ,QACRZ,QAASF,EAAOE,QAChB2H,KAAMC,KAAKC,UAAU,CACnB7E,KAAMb,EAAKa,KACX8E,MAAO3F,EAAKuF,QAEb7G,MAAK,SAACV,GACP,OAAOD,EAAcC,EACvB,KG8FGU,MAAK,SAACV,GACLwE,EAAahD,YAAcxB,EAAI6C,KAC/B4B,EAAmBjD,YAAcxB,EAAI2H,MACrCzI,EAAW2F,EACb,IACCnD,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IACCG,SAAQ,SAAC9B,GACRiG,EAA6BzE,YAAc,WAC7C,GACJ,CAwFEoG,CAAuBvI,EACzB,IAEAiG,EAAoBvG,iBAAiB,UAAU,SAACM,IAzFhD,SAA4BA,EAAKH,EAAYsD,GAG3C,IH3G4BR,EGyG5BkE,EAAyB1E,YAAc,gBACvCnC,EAAIG,kBH1GwBwC,EGgHd,CAAE6F,SALC,CACfhF,KAAMkD,EAAiBsB,MACvBP,KAAMd,EAASqB,MACfjF,MAAO,KH7GF5B,MAAM,GAADH,OAAIV,EAAOC,QAAO,UAAU,CACtCa,OAAQ,OACRZ,QAASF,EAAOE,QAChB2H,KAAMC,KAAKC,UAAU,CACnBZ,KAAM9E,EAAK6F,SAASf,KACpBjE,KAAMb,EAAK6F,SAAShF,SAErBnC,MAAK,SAACV,GACP,OAAOD,EAAcC,EACvB,KGuGGU,MAAK,SAACV,GA1CJ,IAEC8H,IAAYzB,EAAQ,CACxBlE,gBAwCgBnC,EAvChBkH,cAAea,eAEjBxD,EAAWyD,QAAQF,GAsCf5I,EAAW4F,EACb,IACCpD,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IACCG,SAAQ,SAACzC,GACR6G,EAAyB1E,YAAc,SACzC,GACJ,CAuEEyG,CAAmB5I,EAAKH,EAC1B,IAEAqG,EAAsBxG,iBAAiB,UAAU,SAACM,IAxElD,SAA2BA,EAAKkG,GAC9BlG,EAAIG,iBACJ2G,EAA2B3E,YAAc,gBACzC,IAAM0G,EAAU3C,EAAsB9F,cAAc,2BHxF1B,SAACyI,GAC3B,OAAO1H,MAAM,GAADH,OAAIV,EAAOC,QAAO,oBAAoB,CAChDa,OAAQ,QACRZ,QAASF,EAAOE,QAChB2H,KAAMC,KAAKC,UAAU,CACnBS,OAAQD,MAETxH,MAAK,SAACV,GACP,OAAOD,EAAcC,EACvB,GACF,EG+EEoI,CAAaF,EAAQb,OAClB3G,MAAK,SAACoG,GACLlC,EAAaP,aACX,QAAO,yBAAAhE,OACkByG,EAAKqB,OAAM,MAEtCD,EAAQb,MAAQ,GAChBnI,EAAW8F,EACb,IACCtD,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,IACCG,SAAQ,SAAC9B,GACRmG,EAA2B3E,YAAc,WAC3C,GACJ,CAsDE6G,CAAkBhJ,EAAKkG,EACzB,IAGAC,EAAS5B,SAAQ,SAACpB,GDnMX,IAA0BR,ICoMd,CACfgB,aAAcR,EACdiB,qBAAsBgC,MAAMC,KAC1BlD,EAAY0C,iBAAiB,kBAE/BxB,aAAclB,EAAY/C,cAAc,kBACxCsE,oBAAqB,yBACrBpB,gBAAiB,0BACjB2F,WAAY,wBD3Md3E,EACE3B,EAAKyB,qBACLzB,EAAK0B,aACL1B,EAAK+B,qBAEP/B,EAAKyB,qBAAqBG,SAAQ,SAACnB,GACjCA,EAAa1D,iBAAiB,SAAS,SAACM,GACtC0D,EAAmBf,EAAKgB,aAAcP,EAAcT,EAAKW,iBACzDgB,EACE3B,EAAKyB,qBACLzB,EAAK0B,aACL1B,EAAK+B,oBAET,GACF,GC+LF,IAzJE5D,QAAQoI,IAAInC,GACT1F,MAAK,SAACsB,GACLwG,OAAOT,aAAe/F,EAAK,GAtBjC,SAAwBA,GACtBwC,EAAahD,YAAcQ,EAAKa,KAChC4B,EAAmBjD,YAAcQ,EAAK2F,MACtC/C,EAAaP,aAAa,QAAS,yBAAFhE,OAA2B2B,EAAKmG,OAAM,KACzE,CAmBMM,CAAeV,cAjBrB,SAA4B/F,GAC1BA,EAAK4B,SAAQ,SAACiE,GACZ,GAAKvD,EAAeoE,KAAKb,EAASf,MAC3B,CACL,IAAMgB,EAAYzB,EAAQ,CACxBlE,gBAAiB0F,EACjBX,cAAea,eAEjBxD,EAAWoE,OAAOb,EACpB,CACF,GACF,CAOMc,CAAmB5G,EAAK,GAC1B,IACCN,OAAM,SAACC,GACNC,QAAQC,IAAIF,EACd,G","sources":["webpack://mesto-project/./src/components/modal.js","webpack://mesto-project/./src/components/api.js","webpack://mesto-project/./src/components/card.js","webpack://mesto-project/./src/components/validation.js","webpack://mesto-project/./src/index.js"],"sourcesContent":["export function openModal(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", pressEscapeClose);\n  popup.addEventListener(\"click\", clickOutsideClose);\n}\n\nexport function closeModal(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", pressEscapeClose);\n  popup.removeEventListener(\"click\", clickOutsideClose);\n}\n\nfunction clickOutsideClose(evt) {\n  if (!evt.target.closest(\".popup__content\")) {\n    evt.preventDefault();\n    const popup = document.querySelector(\".popup_is-opened\");\n    closeModal(popup);\n  }\n}\n\nfunction pressEscapeClose(evt) {\n  if (evt.key === \"Escape\") {\n    evt.preventDefault();\n    const selectedPopup = document.querySelector(\".popup_is-opened\");\n    closeModal(selectedPopup);\n  }\n}\n","const config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-21\",\n  headers: {\n    authorization: \"ba726ca4-babe-4c60-b803-4ec06cee7921\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nfunction checkResponse(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n}\n\nexport const getUserInfo = fetch(`${config.baseUrl}/users/me`, {\n  method: \"GET\",\n  headers: config.headers,\n}).then((res) => {\n  return checkResponse(res);\n});\n\nexport const getCards = fetch(`${config.baseUrl}/cards`, {\n  method: \"GET\",\n  headers: config.headers,\n}).then((res) => {\n  return checkResponse(res);\n});\n\nexport const updateUserServerInfo = (data) => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name: data.name,\n      about: data.job,\n    }),\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const createNewPost = (data) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headers,\n    body: JSON.stringify({\n      link: data.dataCard.link,\n      name: data.dataCard.name,\n    }),\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const deleteCard = (card) => {\n  return fetch(`${config.baseUrl}/cards/` + card, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const addLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/` + cardId, {\n    method: \"PUT\",\n    headers: config.headers,\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const removeLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/` + cardId, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n\nexport const changeAvatar = (linkImg) => {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      avatar: linkImg,\n    }),\n  }).then((res) => {\n    return checkResponse(res);\n  });\n};\n","import { openModal, closeModal } from \"./modal.js\";\nimport { deleteCard, addLike, removeLike } from \"./api.js\";\nexport const cardTemplate = document.querySelector(\"#card-template\").content;\n\nconst popupDelete = document.querySelector(\".delete__popup\");\nconst buttonPopupDelete = popupDelete.querySelector(\".popup__button\");\n\nexport function launchDeleteCard(event, cardId) {\n  const selectedCard = event.target.closest(\".card\");\n  openModal(popupDelete);\n  buttonPopupDelete.addEventListener(\"click\", (evt) => {\n    buttonPopupDelete.textContent = \"Удаление...\";\n    deleteCard(cardId._id)\n      .then((res) => {\n        selectedCard.remove();\n        closeModal(popupDelete);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally((res) => {\n        buttonPopupDelete.textContent = \"Да\";\n      });\n  });\n}\n\nexport function likeCard(event, data, likeCounter) {\n  if (!event.target.classList.contains(\"card__like-button_is-active\")) {\n    addLike(data.informationCard._id)\n      .then((res) => {\n        likeCounter.textContent = \"\" + res.likes.length;\n        event.target.classList.toggle(\"card__like-button_is-active\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  } else {\n    removeLike(data.informationCard._id)\n      .then((res) => {\n        likeCounter.textContent = \"\" + res.likes.length;\n        event.target.classList.toggle(\"card__like-button_is-active\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n}\n\nexport function makeCard(\n  data,\n  launchDeleteCard,\n  likeCard,\n  handlerOpenPopupImage\n) {\n  const cardData = data.informationCard;\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\n  const buttonLike = cardElement.querySelector(\".card__like-button\");\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const likeCounter = cardElement.querySelector(\".like__counter\");\n  const contentForCounter = \"\" + cardData.likes.length;\n  likeCounter.textContent = contentForCounter;\n  cardImage.src = cardData.link;\n  cardImage.alt = cardData.name;\n  cardElement.querySelector(\".card__title\").textContent = cardData.name;\n  const buttonRemove = cardElement.querySelector(\".card__delete-button\");\n  if (cardData.owner._id === data.informationMe._id) {\n    buttonRemove.addEventListener(\"click\", (evt) => {\n      launchDeleteCard(evt, cardData);\n    });\n  } else {\n    buttonRemove.remove();\n  }\n  cardData.likes.forEach((arrayLike) => {\n    if (arrayLike._id === data.informationMe._id) {\n      buttonLike.classList.add(\"card__like-button_is-active\");\n    }\n  });\n  buttonLike.addEventListener(\"click\", (evt) => {\n    likeCard(evt, data, likeCounter);\n  });\n  cardImage.addEventListener(\"click\", (evt) => {\n    handlerOpenPopupImage(evt);\n  });\n  return cardElement;\n}\n","const showInputError = (\n  formElement,\n  inputElement,\n  errorMessage,\n  inputErrorClass\n) => {\n  const errorElement = formElement.querySelector(\n    `.input_${inputElement.name}-error`\n  );\n  inputElement.classList.add(inputErrorClass);\n  errorElement.textContent = errorMessage;\n};\n\nconst hideInputError = (formElement, inputElement, inputErrorClass) => {\n  const errorElement = formElement.querySelector(\n    `.input_${inputElement.name}-error`\n  );\n  errorElement.textContent = \"\";\n  inputElement.classList.remove(inputErrorClass);\n};\n\nexport function checkInputValidity(\n  formSelector,\n  inputSelector,\n  inputErrorClass\n) {\n  if (inputSelector.validity.patternMismatch) {\n    inputSelector.setCustomValidity(inputSelector.dataset.errorMessage);\n  } else {\n    inputSelector.setCustomValidity(\"\");\n  }\n  if (inputSelector.validity.valid) {\n    hideInputError(formSelector, inputSelector, inputErrorClass);\n  } else {\n    showInputError(\n      formSelector,\n      inputSelector,\n      inputSelector.validationMessage,\n      inputErrorClass\n    );\n  }\n}\n\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((evt) => {\n    return !evt.validity.valid;\n  });\n};\n\nexport function enableValidation(data) {\n  toggleButtonState(\n    data.inputListFormProfile,\n    data.buttonSubmit,\n    data.inactiveButtonClass\n  );\n  data.inputListFormProfile.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", (evt) => {\n      checkInputValidity(data.formSelector, inputElement, data.inputErrorClass);\n      toggleButtonState(\n        data.inputListFormProfile,\n        data.buttonSubmit,\n        data.inactiveButtonClass\n      );\n    });\n  });\n}\n\nexport function clearValidation(\n  formElement,\n  inputListFormProfile,\n  buttonSubmit\n) {\n  toggleButtonState(inputListFormProfile, buttonSubmit);\n  inputListFormProfile.forEach((inputElement) => {\n    hideInputError(formElement, inputElement);\n    inputElement.removeEventListener(\"input\", (evt) => {\n      checkInputValidity(formElement, inputElement);\n      toggleButtonState(inputListFormProfile, buttonSubmit);\n    });\n  });\n}\n\nexport const toggleButtonState = (\n  inputList,\n  ButtonPopupSubmit,\n  inactiveButtonClass = \"popup__button_disabled\"\n) => {\n  if (hasInvalidInput(inputList)) {\n    ButtonPopupSubmit.setAttribute(\"disabled\", \"\");\n    ButtonPopupSubmit.classList.add(\"\" + inactiveButtonClass);\n  } else {\n    ButtonPopupSubmit.classList.remove(\"\" + inactiveButtonClass);\n    ButtonPopupSubmit.removeAttribute(\"disabled\", \"\");\n  }\n};\n","import \"./pages/index.css\";\nimport { makeCard, likeCard, launchDeleteCard } from \"./components/card.js\";\nimport { openModal, closeModal } from \"./components/modal.js\";\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\nimport {\n  getUserInfo,\n  getCards,\n  updateUserServerInfo,\n  createNewPost,\n  changeAvatar,\n} from \"./components/api.js\";\n// Обьявление переменных:\nconst validationLink = /http.*(jpeg|jpg|gif|png)/gi;\n\nconst placesList = document.querySelector(\".places__list\");\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst buttonEdit = document.querySelector(\".profile__edit-button\");\nconst buttonAdd = document.querySelector(\".profile__add-button\");\nconst profileImage = document.querySelector(\".profile__image\");\n//const profileImage = document.querySelector(\".profile_edit_blackout\");\n//Модальные окна:\nconst popupEdit = document.querySelector(\".popup_type_edit\");\nconst popupNewCard = document.querySelector(\".popup_type_new-card\");\nconst popupImage = document.querySelector(\".popup_type_image\");\nconst popupNewAvatar = document.querySelector(\".popup_type_edit_avatar\");\nconst buttonPopupsClose = document.querySelectorAll(\".popup__close\");\nconst selectedPopupImage = popupImage.querySelector(\".popup__image\");\nconst popupCaption = popupImage.querySelector(\".popup__caption\");\n\n//Элементы формы:\nconst formElementEditProfile = popupEdit.querySelector(\n  \".popup__form[name='edit-profile']\"\n);\nconst formElementNewPlace = popupNewCard.querySelector(\n  \".popup__form[name='new-place']\"\n);\nconst formElementEditAvatar = popupNewAvatar.querySelector(\n  \".popup__form[name='edit-avatar']\"\n);\n\nconst formList = Array.from(document.querySelectorAll(\".popup__form\"));\n\nconst inputListFormProfile = Array.from(\n  formElementEditProfile.querySelectorAll(\".popup__input\")\n);\n\nconst inputListFormAddCard = Array.from(\n  formElementNewPlace.querySelectorAll(\".popup__input\")\n);\n\nconst inputListFormEditAvatar = Array.from(\n  formElementEditAvatar.querySelectorAll(\".popup__input\")\n);\n\nconst nameProfileInput = formElementEditProfile.querySelector(\n  \".popup__input_type_name\"\n);\nconst jobInput = formElementEditProfile.querySelector(\n  \".popup__input_type_description\"\n);\n\nconst nameNewCardInput = formElementNewPlace.querySelector(\n  \".popup__input_type_card-name\"\n);\nconst urlInput = formElementNewPlace.querySelector(\".popup__input_type_url\");\n\nconst buttonPopupEditPtofileSubmit =\n  formElementEditProfile.querySelector(\".popup__button\");\n\nconst buttonPopupAddCardSubmit =\n  formElementNewPlace.querySelector(\".popup__button\");\n\nconst buttonPopupNewAvatarSubmit =\n  formElementEditAvatar.querySelector(\".popup__button\");\n\nconst dataForCards = [getUserInfo, getCards];\n\nfunction addCard(data) {\n  return makeCard(data, launchDeleteCard, likeCard, handlerOpenPopupImage);\n}\n\nfunction updateUserInfo(data) {\n  profileTitle.textContent = data.name;\n  profileDescription.textContent = data.about;\n  profileImage.setAttribute(\"style\", `background-image: url(${data.avatar})`);\n}\n\nfunction renderInitialCards(data) {\n  data.forEach((dataCard) => {\n    if (!validationLink.test(dataCard.link)) {\n    } else {\n      const readyCard = addCard({\n        informationCard: dataCard,\n        informationMe: dataUserInfo,\n      });\n      placesList.append(readyCard);\n    }\n  });\n}\n\nfunction loadInitialInfo() {\n  Promise.all(dataForCards)\n    .then((data) => {\n      window.dataUserInfo = data[0];\n      updateUserInfo(dataUserInfo);\n      renderInitialCards(data[1]);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\nexport function renderNewCard(dataNewCard) {\n  const dataCard = dataNewCard;\n  const readyCard = addCard({\n    informationCard: dataCard,\n    informationMe: dataUserInfo,\n  });\n  placesList.prepend(readyCard);\n}\n\nfunction handlerOpenPopupImage(evt) {\n  selectedPopupImage.src = evt.target.src;\n  selectedPopupImage.alt = evt.target.alt;\n  popupCaption.textContent = evt.target.alt;\n  openModal(popupImage);\n}\n\nfunction handlerFormEditProfile(evt, formElement) {\n  evt.preventDefault();\n  buttonPopupEditPtofileSubmit.textContent = \"Сохранение...\";\n  updateUserServerInfo({ name: nameProfileInput.value, job: jobInput.value })\n    .then((res) => {\n      profileTitle.textContent = res.name;\n      profileDescription.textContent = res.about;\n      closeModal(popupEdit);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally((res) => {\n      buttonPopupEditPtofileSubmit.textContent = \"Сохранить\";\n    });\n}\n\nfunction handlerFormNewCard(evt, closeModal, formElement) {\n  buttonPopupAddCardSubmit.textContent = \"Сохранение...\";\n  evt.preventDefault();\n  const newCards = {\n    name: nameNewCardInput.value,\n    link: urlInput.value,\n    likes: [],\n  };\n  createNewPost({ dataCard: newCards })\n    .then((res) => {\n      renderNewCard(res);\n      closeModal(popupNewCard);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally((evt) => {\n      buttonPopupAddCardSubmit.textContent = \"Создать\";\n    });\n}\n\nfunction handlerEditAvatar(evt, formElementEditAvatar) {\n  evt.preventDefault();\n  buttonPopupNewAvatarSubmit.textContent = \"Сохранение...\";\n  const linkImg = formElementEditAvatar.querySelector(\".popup__input_type_url\");\n  changeAvatar(linkImg.value)\n    .then((link) => {\n      profileImage.setAttribute(\n        \"style\",\n        `background-image: url(${link.avatar})`\n      );\n      linkImg.value = \"\";\n      closeModal(popupNewAvatar);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally((res) => {\n      buttonPopupNewAvatarSubmit.textContent = \"Сохранить\";\n    });\n}\n\n//Открытие попапов:\n\nbuttonEdit.addEventListener(\"click\", (evt) => {\n  nameProfileInput.value = profileTitle.textContent;\n  jobInput.value = profileDescription.textContent;\n  openModal(popupEdit);\n  clearValidation(\n    formElementEditProfile,\n    inputListFormProfile,\n    buttonPopupEditPtofileSubmit,\n    \"popup__button_disabled\"\n  );\n});\n\nbuttonAdd.addEventListener(\"click\", (evt) => {\n  formElementNewPlace.reset();\n  clearValidation(\n    formElementNewPlace,\n    inputListFormAddCard,\n    buttonPopupAddCardSubmit\n  );\n  openModal(popupNewCard);\n});\n\nprofileImage.addEventListener(\"click\", (evt) => {\n  clearValidation(\n    formElementEditAvatar,\n    inputListFormEditAvatar,\n    buttonPopupNewAvatarSubmit\n  );\n  openModal(popupNewAvatar);\n});\n\n//Закрытие попапов:\n\nbuttonPopupsClose.forEach((evt) => {\n  evt.addEventListener(\"click\", (evt) => {\n    closeModal(evt.target.closest(\".popup\"));\n  });\n});\n\n//Отправка данных:\n\nformElementEditProfile.addEventListener(\"submit\", (evt) => {\n  handlerFormEditProfile(evt, formElementEditProfile);\n});\n\nformElementNewPlace.addEventListener(\"submit\", (evt) => {\n  handlerFormNewCard(evt, closeModal, formElementNewPlace);\n});\n\nformElementEditAvatar.addEventListener(\"submit\", (evt) => {\n  handlerEditAvatar(evt, formElementEditAvatar);\n});\n//Валидация:\n\nformList.forEach((formElement) => {\n  enableValidation({\n    formSelector: formElement,\n    inputListFormProfile: Array.from(\n      formElement.querySelectorAll(\".popup__input\")\n    ),\n    buttonSubmit: formElement.querySelector(\".popup__button\"),\n    inactiveButtonClass: \"popup__button_disabled\",\n    inputErrorClass: \"popup__input_type_error\",\n    errorClass: \"popup__error_visible\",\n  });\n});\n\n//Добавление карточек и работа с сервером:\n\nloadInitialInfo();\n"],"names":["openModal","popup","classList","add","document","addEventListener","pressEscapeClose","clickOutsideClose","closeModal","remove","removeEventListener","evt","target","closest","preventDefault","querySelector","key","config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","concat","status","getUserInfo","fetch","method","then","getCards","deleteCard","card","addLike","cardId","removeLike","cardTemplate","content","popupDelete","buttonPopupDelete","launchDeleteCard","event","selectedCard","textContent","_id","catch","err","console","log","finally","likeCard","data","likeCounter","contains","informationCard","likes","length","toggle","showInputError","formElement","inputElement","errorMessage","inputErrorClass","errorElement","name","hideInputError","checkInputValidity","formSelector","inputSelector","validity","patternMismatch","setCustomValidity","dataset","valid","validationMessage","clearValidation","inputListFormProfile","buttonSubmit","toggleButtonState","forEach","inputList","ButtonPopupSubmit","inactiveButtonClass","arguments","undefined","some","hasInvalidInput","removeAttribute","setAttribute","validationLink","placesList","profileTitle","profileDescription","buttonEdit","buttonAdd","profileImage","popupEdit","popupNewCard","popupImage","popupNewAvatar","buttonPopupsClose","querySelectorAll","selectedPopupImage","popupCaption","formElementEditProfile","formElementNewPlace","formElementEditAvatar","formList","Array","from","inputListFormAddCard","inputListFormEditAvatar","nameProfileInput","jobInput","nameNewCardInput","urlInput","buttonPopupEditPtofileSubmit","buttonPopupAddCardSubmit","buttonPopupNewAvatarSubmit","dataForCards","addCard","handlerOpenPopupImage","cardData","cardElement","cloneNode","buttonLike","cardImage","contentForCounter","src","link","alt","buttonRemove","owner","informationMe","arrayLike","makeCard","value","reset","job","body","JSON","stringify","about","handlerFormEditProfile","dataCard","readyCard","dataUserInfo","prepend","handlerFormNewCard","linkImg","avatar","changeAvatar","handlerEditAvatar","errorClass","all","window","updateUserInfo","test","append","renderInitialCards"],"sourceRoot":""}